<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="main">
        <h1>Configuration</h1>
        
        <select name="month" id="monthSelect">
          <option value="months">month</option>
          <option value="january">January</option>
          <option value="february">February</option>
          <option value="march">March</option>
          <option value="april">April</option>
          <option value="may">May</option>
          <option value="june">June</option>
          <option value="july">July</option>
          <option value="august">August</option>
          <option value="september">September</option>
          <option value="october">October</option>
          <option value="november">November</option>
          <option value="december">December</option>
        </select>
    </div>
    <br><br>
    <div class="postingdates">
        <!-- Post fields -->
        <label for="inpost1">Post 1</label>
        <br><br>
        <label for="">Start</label>
        <input type="date" id="inpost1_start">
        <label for="">End</label>
        <input type="date" id="inpost1_end">
        <br><br>
        <label for="inpost2">Post 2</label>
        <br><br>
        <label for="">Start</label>
        <input type="date" id="inpost2_start">
        <label for="">End</label>
        <input type="date" id="inpost2_end">
        <br><br>
        <label for="inpost3">Post 3</label>
        <br><br>
        <label for="">Start</label>
        <input type="date" id="inpost3_start">
        <label for="">End</label>
        <input type="date" id="inpost3_end">
        <br><br>
        <label for="inpost4">Post 4</label>
        <br><br>
        <label for="">Start</label>
        <input type="date" id="inpost4_start">
        <label for="">End</label>
        <input type="date" id="inpost4_end">
        <br><br>
        <label for="inpost5">Post 5</label>
        <br><br>
        <label for="">Start</label>
        <input type="date" id="inpost5_start">
        <label for="">End</label>
        <input type="date" id="inpost5_end">
        <br><br>
        <label for="inpost6">Post 6</label>
        <br><br>
        <label for="">Start</label>
        <input type="date" id="inpost6_start">
        <label for="">End</label>
        <input type="date" id="inpost6_end">
        <br>
    </div>
    <br><br>
    <div class="postingNames">
        <h1>All Posting</h1>
        <input type="text" id="allpost">
        <button id="addPostingButton">Add Posting</button>
        <ul id="postingList">
            <!-- List items will go here -->
        </ul>
    </div>
    <button id="saveButton">Save</button>
    <script>
        const postingsList = [];
    
        function addPosting() {
            const postText = document.getElementById('allpost').value.trim();
    
            if (postText) {
                postingsList.push(postText);
                const li = document.createElement('li');
                li.textContent = postText;
                document.getElementById('postingList').appendChild(li);
                document.getElementById('allpost').value = ''; // Clear the input field after adding
            } else {
                alert('Please enter a posting.');
            }
        }
    
        function submitData() {
            const month = document.getElementById('monthSelect').value;
    
            // Create a postings object
            const postings = {};
            document.querySelectorAll('.postingdates input[type="date"]').forEach((input, index) => {
                const postNumber = Math.floor(index / 2) + 1;
                if (index % 2 === 0) {
                    if (!postings[`post${postNumber}`]) postings[`post${postNumber}`] = [];
                    postings[`post${postNumber}`].push({ start: input.value, end: document.querySelector(`#inpost${postNumber}_end`).value });
                }
            });
    
            const allposting = postingsList;
    
            const data = {
                month: month,
                postings: [postings],
                allposting: allposting
            };
    
            fetch('https://nursing-backend.vercel.app/config', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (!response.ok) {
                    // Response status is not OK
                    return response.text().then(text => { throw new Error(text); });
                }
                return response.json();
            })
            .then(data => {
                console.log('Success:', data);
                alert("Success");
            })
            .catch(error => {
                console.error('Error:', error);
                alert(`Error: ${error.message}`);
            });
        }
    
        document.getElementById('addPostingButton').addEventListener('click', addPosting);
        document.getElementById('saveButton').addEventListener('click', submitData);
    </script>
    
</body>
</html>
